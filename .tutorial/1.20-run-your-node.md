# Running Your Lightning Node

Nice job! You've put in the proof of work! Now it's time to start up your Lightning node, make some connections over the Lightning network, and send some payments!

## Start Your Node

Let's begin by starting up your Lightning node. Open up a **Shell** in a new tab. Once you do this, go ahead and run the following command in the Shell.


<p align="center" style="width: 50%; max-width: 300px;">
  <img src="./tutorial_images/cargo_run_workshop.png" alt="cargo_run_workshop" width="30%" height="auto">
</p>

```
cargo run workshop
```

When your node is up-and-running, you should see something like the below. Note, your Node ID will be different than what is seen in the image.

<p align="center" style="width: 50%; max-width: 300px;">
  <img src="./tutorial_images/node_start.png" alt="node_start" width="100%" height="auto">
</p>

## Familiarize Yourself With The Command Line
For this workshop, we'll be interacting with our node using the command line. If you're curious to learn more about what's going on under the hood, check out `src/cli/rs.`.

To see which commands are available to you, type the below command in your **Shell**.

```
help
```

You should see a variety of command options appear, informing you how you can perform operations both on-chain and off-chain.

## Preparing To Open A Lightning Channel

Let's get our node ready to open a channel! To begin, type the below command in your **Shell**.

```
getbalance
```

#### Question: Are you ready to open a channel on the Lightning Network?
<details>
  <summary>Answer</summary>

Not really! Though, the exact answer here is a little more nuanced.

If you want open a V1 channel (without dual-funding), you will have to provide the funds. Since you have no on-chain bitcoin, you won't be able to open a V1 channel. Someone else could open a channel *to you*, but then you'd still want some on-chain UTXO's so that you can fee-bump Lightning transactions, if the need arises.

Let's get you some on-chain bitcoin so that you can open a channel!

</details>

Go ahead and type the following command in the **Shell** so that you can get an on-chain address. This command will return an on-chain address for the BDK wallet that we implemented earlier in this workbook! Send that address to your workshop facilitator, and they will send you some on-chain regtest bitcoin that you can use to open a channel.

```
getaddress
```

Once you workshop faciltator sends you some bitcoin, try checking your on-chain balance again. You should find that things have changed!

## Connecting To A Peer
Now, before you open a channel, you must connect to the peer you wish to open a channel with. If you look at the commands available to you, you'll see that one of them, listed under the **Peers** section, is: `connectpeer pubkey@host:port`. Remember, these ingredients are how we identify and connect with nodes on the Lightning Network.

Unfortunately, you won't be able to connect to peers in the workshop because Replit does not expose an IP Address for your Repl to use. However, you workshop facilitator will be running a node and exposing their IP address so that you can connect to them. Once multiple people are connected to the facilitator, you'll be able to send eachother payments by routing *through* the facilitator.

Try running the below command in your **Shell** to form a connection with your workshop facilitator. Once complete, you should see a SUCCESS message!
```
connectpeer 027e377864733bf8feebeed9b4ecdeef5440e680c99c8c117df20b46b66712d023@3.tcp.ngrok.io:21935
```

To confirm the connection worked, you can always use the `listpeers` command, which will inform you which peers your node is connected to.

